cmake_minimum_required(VERSION 3.21)
project(MyProject CXX)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# Add executable with main.cpp
add_executable(MyProject
src/main.cpp
src/helper_functions.cpp
include/helper_functions.h
)

# Include directories
target_include_directories(Devflow PRIVATE include)

# Dummy source files that don't exist yet (CLion will show these as missing)
target_sources(Devflow PRIVATE
src/utilities.cpp
src/calculations.cpp
include/utilities.h
include/calculations.h
)

# Optional: Add some compiler options
target_compile_options(Devflow PRIVATE
-Wall
-Wextra
-O2
)

add_library(my_library STATIC
lib/src/lib_utils.cpp
lib/include/lib_utils.h
)

target_include_directories(my_library PUBLIC lib/include)

# Link the library to the main executable
target_link_libraries(Devflow PRIVATE my_library)

add_subdirectory(tests)

find_package(Threads REQUIRED)
target_link_libraries(Devflow PRIVATE Threads::Threads)


configure_file(
"${PROJECT_SOURCE_DIR}/config.h.in"
"${PROJECT_BINARY_DIR}/config.h"
)


target_include_directories(Devflow PRIVATE "${PROJECT_BINARY_DIR}")