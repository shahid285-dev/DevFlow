cmake_minimum_required(VERSION 3.18.1)

project("devflow")

# Registry library
add_library(app_registry SHARED
app_registry/app_registry.c
)

# Architecture detection library
add_library(architecture_detector STATIC
architecture/architecture_detector.c
)

# Filesystem library
add_library(filesystem STATIC
filesystem/filesystem.c
)

# Network library
add_library(network STATIC
network/network.c
)

# Process library
add_library(process STATIC
process/process.c
)

# Main app library (links everything together)
add_library(mobile_ide SHARED
main.c
)

# Link main app with all components
target_link_libraries(mobile_ide
app_registry
architecture_detector
filesystem
network
process
log
)

# Include directories
target_include_directories(mobile_ide PRIVATE
${CMAKE_SOURCE_DIR}/app_registry
${CMAKE_SOURCE_DIR}/architecture
${CMAKE_SOURCE_DIR}/filesystem
${CMAKE_SOURCE_DIR}/network
${CMAKE_SOURCE_DIR}/process
)